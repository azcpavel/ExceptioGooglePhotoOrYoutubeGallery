!function(t){var i={type:"photo",galleryWidth:"100%",wrapClass:null,galleryUserId:"azc.pavel@gmail.com",emptyMessage:"No Content Found",hideContent:[],galleryUserApiKey:"",photoCommentsCSS:{margin:"0 auto",width:"60%","text-align":"left"},photoViewMainDivNextText:"Next",photoViewMainDivNextClass:"",photoViewMainDivPrevText:"Prev",photoViewMainDivPrevClass:"",albumRootText:"Exceptio Google Gallery",albumBreadcrumbCSS:{},albumBreadcrumbArrow:"<span> &lt;= </span>",albumBreadcrumbSpanCSS:{color:"#000",cursor:"pointer"},albumTitleCSS:"",backgroundAlbum:"rgb(0,0,0)",backgroundAlbumHover:"rgba(0,0,0,0.9)",backgroundGallery:"rgb(0,0,0)",backgroundPopup:"rgba(0,0,0,0.6)",photoPreviewCloseText:"Close&nbsp;&nbsp;&nbsp;",hideMoreThen:0,hideMoreThenBack:0,loadingImage:"loader.gif",loadMoreText:"Load More..",loadLessText:"Load Less..",loadMoreCSS:{cursor:"pointer"},onGalleryEnter:function(){},onGalleryPhoto:function(){}};t.fn.exceptioGoogleGallery=function(e){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).exceptioGoogleGallery(e)}),this;var s,o,n,l={},a=this,r=t(window).width(),h=t(window).height();function p(){a.reloadGallery(e)}t(window).resize(function(){a.fadeIn(),t(".photoGallery").remove(),clearTimeout(n),r=t(window).width(),h=t(window).height(),n=setTimeout(p,500)});var d=function(e){l.settings=t.extend({},i,e),o=r>768?"25":r>480?"50":"100",a.html('<div style="width:100%;text-align:center;"><img src="'+l.settings.loadingImage+'"/></div>'),t("#exLoadMoreAlbum").remove(),a.wrap('<div class="exGallery" data-exGalleryIndex="'+t("div").index(a)+'"><div class="ex-viewport"></div></div>'),a.viewport=a.parent().css({float:"left",width:"100%"}),a.more=t('<div class="exMore" style="width:100%;float:left"></div>'),a.breadcrumb=t('<div style="width:100%;float:left"></div>').css(l.settings.albumBreadcrumbCSS),a.root=t('<span style="cursor:pointer" title="Back to Album Root">'+l.settings.albumRootText+"</span>").css(l.settings.albumBreadcrumbSpanCSS).click(function(){t(this).parent().find("span:gt(0)").remove(),t(this).html(l.settings.albumRootText),a.viewport.find('div[class="photoGallery"]').fadeOut("slow").remove(),a.fadeIn("slow"),a.more.fadeIn("slow")}),a.viewport.prepend(a.breadcrumb),a.breadcrumb.html(a.root),a.viewport.append(a.more),a.wrapper=a.viewport.parent().css({float:"left",width:"100%"}),a.css({float:"left",width:"99%",padding:"0.5%"}),null!=l.settings.wrapClass&&a.wrapper.addClass(l.settings.wrapClass),"youtube"==l.settings.type&&t.getJSON("https://www.googleapis.com/youtube/v3/playlistItems?playlistId="+l.settings.galleryUserId+"&key="+l.settings.galleryUserApiKey+"&maxResults=50&type=video&part=id,snippet",function(i){if(i.items.length<1)a.viewport.html(l.settings.emptyMessage);else{t.getJSON("https://www.googleapis.com/youtube/v3/channels?id="+i.items[0].snippet.channelId+"&key="+l.settings.galleryUserApiKey+"&part=contentDetails,snippet,statistics",function(t){s=t.items[0]});var e=i.items,o=function(i){t.getJSON("https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+i.nextPageToken+"&playlistId="+l.settings.galleryUserId+"&key="+l.settings.galleryUserApiKey+"&maxResults=50&type=video&part=id,snippet",function(i){if(i.nextPageToken)t.each(i.items,function(t,i){e.push(i)}),o(i);else{if(t.each(i.items,function(t,i){e.push(i)}),a.empty(),0!=l.settings.hideMoreThen)var s=e.length>=l.settings.hideMoreThen?l.settings.hideMoreThen:e.length;else s=e.length;for(var n=0;n<s;n++)-1==l.settings.hideContent.indexOf(e[n].snippet.title)&&g(e,n)}})};if(i.nextPageToken)o(i);else{if(a.empty(),0!=l.settings.hideMoreThen)var n=e.length>=l.settings.hideMoreThen?l.settings.hideMoreThen:e.length;else n=e.length;for(var r=0;r<n;r++)-1==l.settings.hideContent.indexOf(e[r].snippet.title)&&g(e,r)}}}),"photo"==l.settings.type&&t.getJSON("http://photos.googleapis.com/data/feed/api/user/"+l.settings.galleryUserId+"?access=public&alt=json-in-script&callback=?",function(t){if(t.feed.entry.length<1)a.viewport.html(l.settings.emptyMessage);else{var i=t.feed.entry;if(a.empty(),0!=l.settings.hideMoreThen)var e=i.length>=l.settings.hideMoreThen?l.settings.hideMoreThen:i.length;else e=i.length;for(var s=0;s<e;s++)-1==l.settings.hideContent.indexOf(i[s].title.$t)&&u(i,s)}}),0==l.settings.hideMoreThen&&0==l.settings.hideMoreThenBack||(0!=l.settings.hideMoreThen?this.$loadMore=t('<span class="exLoadMoreAlbum">'+l.settings.loadMoreText+"</span>").css(l.settings.loadMoreCSS).click(function(){l.settings.hideMoreThenBack=l.settings.hideMoreThen,l.settings.hideMoreThen=0,a.reloadGallery(l.settings)}):this.$loadMore=t('<span class="exLoadMoreAlbum">'+l.settings.loadLessText+"</span>").css(l.settings.loadMoreCSS).click(function(){l.settings.hideMoreThen=l.settings.hideMoreThenBack,a.reloadGallery(l.settings),t("html,body").animate({scrollTop:a.offset().top},500)}),a.more.html(this.$loadMore))},g=function(i,e){t.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+i[e].snippet.resourceId.videoId+"&key="+l.settings.galleryUserApiKey+"&part=snippet,statistics,status",function(s){var n=s.items[0];this.$galleryAlbum=t('<div class="galleryAlbum"></div>').css({position:"relative",height:"210",float:"left",cursor:"pointer",background:l.settings.backgroundAlbum,margin:"0.5%",width:o-1+"%",overflow:"hidden"}),this.$galleryAlbumImage=t('<img src="'+n.snippet.thumbnails.high.url+'">').css({transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",width:"150%","min-height":"210px","margin-left":"-25%",display:"inline-block","vertical-align":"middle"}),this.$galleryAlbum.html(this.$galleryAlbumImage),this.$galleryAlbumPop=t('<div class="galleryAlbumPop"></div>').css({overflow:"hidden",height:"250px",width:"100%",color:"#FFF",background:l.settings.backgroundAlbumHover,"text-align":"center",transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",position:"absolute",top:"80%","padding-top":"2%","z-index":"39237"}),this.$galleryAlbumPopDiv=t('<div style="width:100%;text-align:center;">'+n.snippet.title+"</div>"),""!=l.settings.albumTitleCSS&&this.$galleryAlbumPopDiv.css(l.settings.albumTitleCSS),this.$galleryAlbumPop.html(this.$galleryAlbumPopDiv).append("<hr>"),this.$galleryAlbum.append(this.$galleryAlbumPop),this.$galleryAlbum.hover(function(){t(this).find("img").css({width:"100%",height:"auto","min-height":"0","margin-left":"0%","margin-top":Math.ceil((t(this).find("img").parent().height()-100*t(this).find("img").height()/150)/2)}),t(".galleryAlbumPop").css("padding-top","2%"),t(".galleryAlbumPop").css("top","80%"),t(this).find('[class="galleryAlbumPop"]').css({"padding-top":"35%",top:"-0.5%"})},function(){t(this).find("img").css({width:"150%","min-height":"210px","margin-left":"-25%","margin-top":"0px"}),t(".galleryAlbumPop").css("padding-top","2%"),t(".galleryAlbumPop").css("top","80%")}),t("body").click(function(){t(".galleryAlbumPop").css("padding-top","2%"),t(".galleryAlbumPop").css("top","80%")}),this.$galleryAlbum.click(function(){a.more.fadeOut("slow"),c(i,e),l.settings.onGalleryEnter()}),a.append(this.$galleryAlbum)})},c=function(i,e){var o;this.$tubeView=t('<div id="photoPreview"></div>').css({"overflow-y":"auto",height:t(window).height(),width:t(window).width(),color:"#FFF",background:l.settings.backgroundPopup,"text-align":"center",transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",position:"fixed",top:"0",left:"0","z-index":"39237846"}),this.$tubeViewClose=t("<div>"+l.settings.photoPreviewCloseText+"</div>").attr("title","Click to close.").css({position:"relative",margin:"5% auto 0 auto","font-size":"20px",width:"80%","text-align":"right",cursor:"pointer"}).click(function(){t(this).parent().fadeOut("slow").remove(),a.more.fadeIn("slow")}),this.$tubeView.html(this.$tubeViewClose),a.append(this.$tubeView),this.$tubeViewMainDiv=t('<div style="width:100%;"></div>'),this.$tubeView.append(this.$tubeViewMainDiv),o=h>r?40*h/100:80*h/100,this.$tubeViewMainDiv.html('<object style="width:60%;height:'+o+'px;margin:0 auto;"><param name="movie" value="https://www.youtube.com/v/'+i[e].snippet.resourceId.videoId+"?version=3&autoplay=0&list="+s.contentDetails.relatedPlaylists.uploads+'"></param><param name="allowScriptAccess" value="always"></param><embed src="https://www.youtube.com/v/'+i[e].snippet.resourceId.videoId+"?version=3&autoplay=0&list="+s.contentDetails.relatedPlaylists.uploads+'" type="application/x-shockwave-flash" allowscriptaccess="always" style="width:60%;height:'+o+'px;"></embed></object>'),this.$tubeViewMainDivComment=t("<div>"+i[e].snippet.description+"</div>").css(l.settings.photoCommentsCSS),this.$tubeViewMainDiv.append(this.$tubeViewMainDivComment),void 0!==i[e+1]&&(this.$tubeViewMainDivNext=t("<span>"+l.settings.photoViewMainDivNextText+"</span>").css({cursor:"pointer",top:"50%",position:"absolute",right:"10%"}).click(function(){t("#photoPreview").remove(),c(i,e+1)}),""!=l.settings.photoViewMainDivNextClass&&this.$tubeViewMainDivNext.addClass(l.settings.photoViewMainDivNextClass),this.$tubeViewMainDiv.append(this.$tubeViewMainDivNext)),void 0!==i[e-1]&&(this.$tubeViewMainDivPrev=t("<span>"+l.settings.photoViewMainDivPrevText+"</span>").css({cursor:"pointer",top:"50%",position:"absolute",left:"10%"}).click(function(){t("#photoPreview").remove(),c(i,e-1)}),""!=l.settings.photoViewMainDivPrevClass&&this.$tubeViewMainDivPrev.addClass(l.settings.photoViewMainDivPrevClass),this.$tubeViewMainDiv.append(this.$tubeViewMainDivPrev)),l.settings.onGalleryPhoto()},u=function(i,e){t.getJSON(i[e].link[0].href+"&imgmax=1600&access=public&alt=json-in-script&callback=?",function(s){var n=s.feed;this.$galleryAlbum=t('<div class="galleryAlbum"></div>').css({position:"relative",height:"210",float:"left",cursor:"pointer",background:l.settings.backgroundAlbum,margin:"0.5%",width:o-1+"%",overflow:"hidden"}),this.$galleryAlbumImage=t('<img src="'+n.entry[0].content.src+'">').css({transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",width:"150%","min-height":"210px","margin-left":"-25%",display:"inline-block","vertical-align":"middle"}),this.$galleryAlbum.html(this.$galleryAlbumImage),this.$galleryAlbumPop=t('<div class="galleryAlbumPop"></div>').css({overflow:"hidden",height:"250px",width:"100%",color:"#FFF",background:l.settings.backgroundAlbumHover,"text-align":"center",transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",position:"absolute",top:"80%","padding-top":"2%","z-index":"39237"}),this.$galleryAlbumPopDiv=t('<div style="width:100%;text-align:center;">'+i[e].title.$t+"</div>"),""!=l.settings.albumTitleCSS&&this.$galleryAlbumPopDiv.css(l.settings.albumTitleCSS),this.$galleryAlbumPop.html(this.$galleryAlbumPopDiv).append("<hr>"),this.$galleryAlbum.append(this.$galleryAlbumPop),this.$galleryAlbum.hover(function(){t(this).find("img").css({width:"100%",height:"auto","min-height":"0","margin-left":"0%","margin-top":Math.ceil((t(this).find("img").parent().height()-100*t(this).find("img").height()/150)/2)}),t(".galleryAlbumPop").css("padding-top","2%"),t(".galleryAlbumPop").css("top","80%"),t(this).find('[class="galleryAlbumPop"]').css({"padding-top":"35%",top:"-0.5%"})},function(){t(this).find("img").css({width:"150%","min-height":"210px","margin-left":"-25%","margin-top":"0px"}),t(".galleryAlbumPop").css("padding-top","2%"),t(".galleryAlbumPop").css("top","80%")}),t("body").click(function(){t(".galleryAlbumPop").css("padding-top","2%"),t(".galleryAlbumPop").css("top","80%")}),this.$galleryAlbum.click(function(){a.more.hide(),this.$albumChield=t(l.settings.albumBreadcrumbArrow+" <span>"+i[e].title.$t+"</span>").css(l.settings.albumBreadcrumbSpanCSS),a.breadcrumb.append(this.$albumChield),this.$photoGallery=t('<div class="photoGallery"></div>').css({"overflow-y":"auto","overflow-x":"hidden",height:"auto",width:"99%",color:"#FFF",background:l.settings.backgroundGallery,"text-align":"center",transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",position:"relative",padding:"0.5%"}),a.viewport.append(this.$photoGallery),a.hide(),this.$photoGallery.fadeIn("slow").append('<div id="exceptioPhotoView"></div>'),t.each(n.entry,function(i,e){t("#exceptioPhotoView").append('<div data-index="'+i+'" style="margin:0.5%;cursor:pointer;width:'+(o-1)+'%;float:left;height:213px;overflow:hidden;"><img src="'+e.content.src+'" style="width:150%;min-height:210px;margin-left:-25%;transition:all 0.5s;-o-transition:all 0.5s;-moz-transition:all 0.5s;-webkit-transition:all 0.5s;"></div>')}),t("#exceptioPhotoView > div").hover(function(){t(this).find("img").css({"margin-left":"0%","min-height":"0",height:"auto",width:"100%","margin-top":Math.ceil((t(this).find("img").parent().height()-100*t(this).find("img").height()/150)/2)})},function(){t(this).find("img").css({"margin-left":"-25%","min-height":"210px",width:"150%","margin-top":"0px"})}),t("#exceptioPhotoView > div").click(function(){m(n,t(this).data("index"))}),l.settings.onGalleryEnter()}),a.append(this.$galleryAlbum)})},m=function(i,e){this.$photoView=t('<div id="photoPreview"></div>').css({"overflow-y":"auto",height:t(window).height(),width:t(window).width(),color:"#FFF",background:l.settings.backgroundPopup,"text-align":"center",transition:"all 0.5s","-o-transition":"all 0.5s","-moz-transition":"all 0.5s","-webkit-transition":"all 0.5s",position:"fixed",top:"0",left:"0","z-index":"39237846"}),this.$photoViewClose=t("<div>"+l.settings.photoPreviewCloseText+"</div>").attr("title","Click to close.").css({position:"absolute","margin-top":"5%","font-size":"20px",width:"80%","text-align":"right",cursor:"pointer"}).click(function(){t(this).parent().fadeOut("slow").remove()}),this.$photoView.html(this.$photoViewClose),t("#exceptioPhotoView").append(this.$photoView);var s=i.entry[e];this.$photoViewMainDiv=t('<div style="width:100%;margin-top:5%;"></div>'),this.$photoView.append(this.$photoViewMainDiv),this.$photoViewMainDiv.html('<img src="'+s.content.src+'" style="width:60%;margin:0 auto;">'),this.$photoViewMainDivComment=t("<div>"+s.media$group.media$description.$t+"</div>").css(l.settings.photoCommentsCSS),this.$photoViewMainDiv.append(this.$photoViewMainDivComment),void 0!==i.entry[e+1]&&(this.$photoViewMainDivNext=t("<span>"+l.settings.photoViewMainDivNextText+"</span>").css({cursor:"pointer",top:"50%",position:"absolute",right:"10%"}).click(function(){t("#photoPreview").remove(),m(i,e+1)}),""!=l.settings.photoViewMainDivNextClass&&this.$photoViewMainDivNext.addClass(l.settings.photoViewMainDivNextClass),this.$photoViewMainDiv.append(this.$photoViewMainDivNext)),void 0!==i.entry[e-1]&&(this.$photoViewMainDivPrev=t("<span>"+l.settings.photoViewMainDivPrevText+"</span>").css({cursor:"pointer",top:"50%",position:"absolute",left:"10%"}).click(function(){t("#photoPreview").remove(),m(i,e-1)}),""!=l.settings.photoViewMainDivPrevClass&&this.$photoViewMainDivPrev.addClass(l.settings.photoViewMainDivPrevClass),this.$photoViewMainDiv.append(this.$photoViewMainDivPrev)),l.settings.onGalleryPhoto()};a.desrtoyGallery=function(){a.more.remove(),a.breadcrumb.remove(),t(this).unwrap().unwrap().unwrap(),t(this).children().css({"list-style":"initial",float:"none"})},a.reloadGallery=function(t){a.desrtoyGallery(),d(t)};d(e)}}(jQuery);